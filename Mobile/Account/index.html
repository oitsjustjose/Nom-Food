<!DOCTYPE html>
<html>
	<head>
		<title>Nom: Account</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
    	<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<link rel="icon" type="image/png" href="../img/app-icon.png">
		<link rel="apple-touch-icon" href="../img/app-icon.png">
		
		<link rel="stylesheet" type="text/css" href="../semantic/out/semantic.min.css">
		<link rel="stylesheet" type="text/css" href="../nom.css">
		<script src="../jquery-1.7.2.js"></script>
		<script src="../semantic/out/semantic.min.js"></script>
		<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA73dfB5qlWO7f8BdF9_MIdS4pa9QvjtnM"></script>
		<script src="https://www.gstatic.com/firebasejs/4.8.1/firebase.js"></script>
		<link rel="stylesheet prefetch" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.13/components/icon.min.css">
		<script src="../my-app.js"></script>
	</head>

	<body onLoad="getActiveUser()">
		<script>
			function getActiveUser()
			{		
				firebase.auth().onAuthStateChanged(firebaseUser => {
					if (firebaseUser)
					{
						document.getElementById("user").innerHTML = firebaseUser['email'];
						document.getElementById("email").remove();
						document.getElementById("email_field").remove()
						document.getElementById("password").remove();
						document.getElementById("pass_field").remove()
						document.getElementById("signup_field").remove();
						document.getElementById("login").remove();
						document.getElementById("status").innerHTML = "Welcome " + firebaseUser['email'] + ", would you like to log out?";
					}
					else
					{
						document.getElementById("user").innerHTML = "Log In";
					}
				});
			}
		</script>
		
		<div class="ui sidebar inverted vertical menu">
			<a onClick="location.assign('..')" class="item">Home</a>
			<a onClick="location.assign('../Nearby')" class="item">Nearby Menus</a>
			<a onClick="location.assign('../Cooking')" class="item">Want to cook for us?</a>
			<a onClick="location.assign('../Account')" class="header item" id="user">Log In</a>
		</div>
		
		<!--This is all stuff for the menubar-->
		<div class="ui large inverted teal top fixed menu container">
			<a class="header item" onClick="toggleSidebar()"><i class="sidebar icon"></i>Menu</a>
		</div>
		
		<div class="ui middle aligned center aligned grid" style="padding-top: 10%">
			<div class="column" style="max-width: 768px;">
				<h2 class="ui teal image header">
					<div class="content" id="status">
					Log in to your account
					</div>
				</h2>
				<form class="ui large form">
					<div class="ui stacked segment">
						<div class="field" id="email_field">
							<div class="ui left icon input">
								<i class="user icon"></i>
								<input type="text" name="email" id="email" placeholder="E-mail address">
							</div>
						</div>
						<div class="field" id="pass_field">
							<div class="ui left icon input">
								<i class="lock icon"></i>
								<input type="password" name="password" id="password" placeholder="Password">
							</div>
						</div>
						<div class="ui fluid large teal submit button" id="login">Login</div> <br>
						<div class="ui fluid large teal submit button" id="logout">Log out</div>
					</div>
					<div class="ui error message"></div>
				</form>

				<div class="ui message" id="signup_field">
					New? <a href="#" id="signup">Sign Up</a>
				</div>
			</div>
		</div>
		<script src="my-app.js" type="text/javascript"></script>
	</body>
</html>
